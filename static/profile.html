<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
</head>
<body>
  <h2>Profile</h2>
  <button onclick="getProfile()">Load Profile</button>
  <pre id="profile"></pre>
  <a href="login.html">Back to Login</a>
  <script>
    async function getProfile() {
      const token = localStorage.getItem('access_token');
      if (!token) {
        document.getElementById('profile').innerText = 'Please log in first.';
        return;
      }
      const resp = await fetch('http://localhost:8000/auth/me', {
        headers: { 'Authorization': 'Bearer ' + token }
      });
      const data = await resp.json();
      if (resp.ok) {
        document.getElementById('profile').innerText = JSON.stringify(data, null, 2);
      } else {
        document.getElementById('profile').innerText = 'Error: ' + data.detail;
      }
    }
  </script>
</body>
</html>
